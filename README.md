# pymongo-api

## Задание 1. Планирование

Ссылка на схему - https://drive.google.com/file/d/16AZDCUjJXFqpJ81D8tW3fi9tqWHIAc7R/view?usp=sharing

## Задание 2. Шардирование

> **Attention** Перед запуском стоит очистить предыдущие вольюмы и контейнеры

### Как запустить

Запускаем сервисы

```shell
docker compose up -d
```

Настраиваем базу, шарды, конфигурационный сервер, роутер и добавляем данные

```shell
./scripts/mongo-init.sh
```

> **Note**: Добавил sleep к запуску команд, из-за того что шарды не всегда успевали запуститься ко времени запуска скрипта

<hr />

## Задание 3. Репликация

> **Attention** Перед запуском стоит очистить предыдущие вольюмы и контейнеры

### Как запустить

Запускаем сервисы

```shell
docker compose up -d
```

Настраиваем базу, шарды, конфигурационный сервер, роутер и добавляем данные

```shell
./scripts/mongo-init.sh
```

> **Note**: Добавил sleep к запуску команд, из-за того что шарды не всегда успевали запуститься ко времени запуска скрипта

<hr />

## Задание 4. Кэширование

> **Attention** Перед запуском стоит очистить предыдущие вольюмы и контейнеры

### Как запустить

Запускаем сервисы

```shell
docker compose up -d
```

Настраиваем базу, шарды, конфигурационный сервер, роутер и добавляем данные

```shell
./scripts/mongo-init.sh
```

> **Note**: Добавил sleep к запуску команд, из-за того что шарды не всегда успевали запуститься ко времени запуска скрипта

<hr />

## Как запустить

Запускаем mongodb и приложение

```shell
docker compose up -d
```

Заполняем mongodb данными

```shell
./scripts/mongo-init.sh
```

## Как проверить

### Если вы запускаете проект на локальной машине

Откройте в браузере http://localhost:8080

### Если вы запускаете проект на предоставленной виртуальной машине

Узнать белый ip виртуальной машины

```shell
curl --silent http://ifconfig.me
```

Откройте в браузере http://<ip виртуальной машины>:8080

## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://<ip виртуальной машины>:8080/docs